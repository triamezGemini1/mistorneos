# ============================================
# LA ESTACIÓN DEL DOMINÓ - URLs Amigables
# ============================================

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /mistorneos/
    
    # Desktop: /desktop/ → /public/desktop/ (para que la URL no incluya "public")
    RewriteRule ^desktop/(.*)$ public/desktop/$1 [L]
    
    # ============================================
    # URLs AMIGABLES PARA TORNEOS
    # ============================================
    # Convierte: /public/torneo/123/torneo-de-domino-2025
    # A: /public/torneo_detalle.php?torneo_id=123
    RewriteRule ^public/torneo/([0-9]+)/([a-z0-9-]+)/?$ public/torneo_detalle.php?torneo_id=$1 [L,QSA]
    
    # Convierte: /public/resultados/123/torneo-de-domino-2025
    # A: /public/resultados_detalle.php?torneo_id=123
    RewriteRule ^public/resultados/([0-9]+)/([a-z0-9-]+)/?$ public/resultados_detalle.php?torneo_id=$1 [L,QSA]
    
    # ============================================
    # SEGURIDAD
    # ============================================
    # Bloquear acceso a archivos sensibles
    <FilesMatch "\.(env|log|sql|md)$">
        Require all denied
    </FilesMatch>
    
    # Proteger directorios sensibles
    RewriteRule ^(config|storage|vendor|tests|cli|database|sql|docs|modules|core|api|scripts)/ - [F,L]
</IfModule>

# Prevenir listado de directorios
Options -Indexes

# Página de error personalizada
ErrorDocument 404 /mistorneos/public/404.php
