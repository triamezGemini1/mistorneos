# Reglas de Comportamiento para Cursor (PHP Edition)

## 1. Preservación y Estabilidad
- ANTES de modificar, analiza las dependencias de funciones y clases existentes.
- NUNCA elimines métodos públicos o propiedades de clase a menos que se solicite explícitamente, ya que otros archivos podrían depender de ellos.
- Si el archivo PHP supera las 400 líneas, sugiere una refactorización en Traits, Interfaces o Clases de Servicio.

## 2. Estándares de Código (PHP)
- Sigue estrictamente PSR-12 para el estilo de código.
- Usa Type Hinting (declaración de tipos) en todos los parámetros de funciones y tipos de retorno (ej. `public function save(User $user): bool`).
- Utiliza siempre `strict_types=1` en la parte superior de los archivos nuevos.
- Maneja excepciones con bloques `try-catch` y logs adecuados en lugar de simples `die()` o `echo`.

## 3. Seguridad Crítica
- Prevenir Inyección SQL: Usa siempre sentencias preparadas (PDO o Eloquent). Jamás concatenes variables directamente en queries.
- Sanitización: Valida y sanitiza todos los inputs del usuario ($_POST, $_GET).
- XSS: Asegúrate de que las salidas al navegador estén escapadas correctamente.

## 4. Flujo de Trabajo Incremental
- Al añadir una funcionalidad "adicional", primero confirma: "¿Sigue funcionando [Función Anterior]?".
- Si el usuario pide un cambio en un controlador, revisa que no rompa el Modelo asociado.
- Mantén los comentarios de PHPDoc actualizados si cambias la firma de una función.

"Strict Rule: If you are unsure about a dependency in a PHP class, perform a symbol search (Cmd+Shift+R equivalent) before deleting any method."